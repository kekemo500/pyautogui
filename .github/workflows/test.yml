name: Run Docker Container with Keep-Alive

on:
  workflow_dispatch:

jobs:
  run-docker:
    runs-on: ubuntu-latest
    timeout-minutes: 25   # نعطي وقت أطول من 20 دقيقة للتأكد

    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Run Docker container
        run: |
          docker run -d \
          -e access_token=${{ secrets.ACCESS_TOKEN }} \
          --tmpfs /tmp \
          --tmpfs /dev/shm \
          feelingsurf/viewer:stable
          echo "Container started!"

      - name: Keep-alive for 20 minutes
        run: |
          echo "Keeping workflow alive for 20 minutes..."
          for i in {1..20}; do
            echo "Minute $i..."
            sleep 60
          done
